name: Release to wordpress.org

on:
  # push:
    # Deploy when a new release tag was created
  #  tags:
  #    - v*
  release:
    # Only deploy when the admin creates/publishes/edits/pre-releases from GitHub
    types: [created, edited, published]

jobs:
  # To push the release (sources) to the WordPress.org SVN instance for this plugin
  wordpress:
    name: Push to wordpress.org
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@master
#    - name: Build
#      run: |
#        npm install
#        npm run build
    - name: WordPress Plugin Deploy
      uses: 10up/action-wordpress-plugin-deploy@master
      env:
        SVN_PASSWORD: ${{secrets.SVN_PASSWORD}}
        SVN_USERNAME: ${{secrets.SVN_USERNAME}}
        SLUG: e20r-members-list
        GITHUB_TOKEN: ${{secrets.GITHUB}}
