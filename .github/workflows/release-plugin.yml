name: Release to wordpress.org

on:
  # push:
    # Deploy when a new release tag was created
  #  tags:
  #    - v*
  release:
    # Only deploy when the admin creates/publishes/edits/pre-releases from GitHub
    types: [edited, published]

jobs:
  # To push the release (sources) to the WordPress.org SVN instance for this plugin
  wordpress:
    name: Push to wordpress.org
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@master
    - name: WordPress Plugin Deploy
      uses: eighty20results/e20r-members-list@master
      with:
          repository: git@github.com:eighty20results/Utilities.git
          token: ${{ secrets.UTILITIES_ACCESS }}
          path: class/utilities
      env:
        SLUG: e20r-members-list
        SVN_PASSWORD: ${{ secrets.SVN_PASSWORD }}
        SVN_USERNAME: ${{ secrets.SVN_USERNAME }}
        GITHUB_TOKEN: ${{ secrets.GITHUB }}

